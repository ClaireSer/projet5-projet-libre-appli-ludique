<?php

namespace GameBundle\Repository;

use Doctrine\ORM\Query\Expr\Join;
use GameBundle\Entity\Question;

/**
* SchoolClassRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class SchoolClassRepository extends \Doctrine\ORM\EntityRepository
{
	public function orderBy() {
		return $this->createQueryBuilder('s')
		      ->orderBy('s.id', 'ASC')
		;
	}

	public function findAll() {
		return $this->createQueryBuilder('sc')
            ->leftJoin('sc.questions', 'q')
            // ->join(Question::class, 'q', Join::WITH, 'sc = q.schoolClass')
            ->where('q.isValid = :isValid')
            ->setParameter('isValid', true)
            // ->groupBy('sc')
            ->orderBy('sc.id', 'ASC')
            ->getQuery()
            ->getResult()
		;
	}
}
