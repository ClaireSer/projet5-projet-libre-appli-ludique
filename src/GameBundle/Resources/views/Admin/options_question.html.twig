{# src/GameBundle/Resources/views/Admin/options_question.html.twig #}

{% extends "GameBundle::layout.html.twig" %}

{% block title %}{{ parent() }} - Options{% endblock %}

{% block body %}
  <div class="container-fluid">
    {% for message in app.session.flashbag.get('notice') %}
      <div class="alert alert-danger">
        <p>{{ message }}</p>
      </div>
    {% endfor %}

    {% for message in app.session.flashbag.get('success') %}
      <div class="alert alert-success">
        <p>{{ message }}</p>
      </div>
    {% endfor %}

    <h3>Options des questions</h3>
    <h4>Choisissez les thèmes des questions</h4>

    <div class="row center" id="themesList">
      {% for subject in subjects %}
        <div class="theme">
          <h5> {{ subject.nameSubject }} </h5>

          {% for topic in subject.topics %}
            <p>{{ topic.nameTopic }}</p>
          {% endfor %}
        </div>
      {% endfor %}
      <div class="theme buttons">
        <div class="btn-group add">
          <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Ajouter <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li><a href="#">Un thème</a></li>
            <li><a href="#">Une catégorie</a></li>
          </ul>
        </div>
        <div class="btn-group delete">
          <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Supprimer <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li><a href="#">Un thème</a></li>
            <li><a href="#">Une catégorie</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-offset-4 col-sm-4 formTheme">
        <h4>Ajout d'un nouveau thème</h4>
        <div class="well">
          {{ form_start(formTheme, {'attr': {'class': 'form-horizontal'}}) }}
          {{ form_errors(formTheme) }}

          <div class="form-group">
              {{ form_row(formTheme.subject) }}
          </div>
          <div class="form-group">
              {{ form_row(formTheme.nameTopic) }}
          </div>
          
          {{ form_widget(formTheme.save, {'attr': {'class': 'btn btn-primary'}}) }}

          {{ form_rest(formTheme) }}
          {{ form_end(formTheme) }}        
        </div>
      </div>

      <div class="col-sm-offset-4 col-sm-4 formTopic">
        <h4>Ajout d'une nouvelle sous-matière</h4>        
        <div class="well">
          {{ form_start(formTopic, {'attr': {'class': 'form-horizontal'}}) }}
          {{ form_errors(formTopic) }}

          <div class="form-group">
              {{ form_row(formTopic.subject) }}
          </div>
          <div class="form-group">
              {{ form_row(formTopic.nameTopic) }}
          </div>
          
          {{ form_widget(formTopic.save, {'attr': {'class': 'btn btn-primary'}}) }}

          {{ form_rest(formTopic) }}
          {{ form_end(formTopic) }}  
        </div>
      </div>
    </div>
  </div>


  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script type="text/javascript">

  $(function () {
    $('.add ul li a:eq(0)').on('click', function(e) {
      $('.formTheme').show();
      $('.formTopic').hide();      
      e.preventDefault();
    })

    $('.add ul li a:eq(1)').on('click', function(e) {
      $('.formTopic').show();
      $('.formTheme').hide();      
      e.preventDefault();
    })

    $('.delete ul li a:eq(0)').on('click', function(e) {
      $('.formTopic').hide();      
      $('.formTheme').hide();      
      e.preventDefault();
    })

    $('.delete ul li a:eq(1)').on('click', function(e) {
      $('.formTopic').hide();      
      $('.formTheme').hide();      
      e.preventDefault();
    })
  });
  
  </script>

{% endblock %}
